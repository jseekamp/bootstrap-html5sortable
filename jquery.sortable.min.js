!function(e){var t,r=e();e.fn.sortable=function(a){var i=String(a);return a=e.extend({connectWith:!1,placeholderClass:"",placeholderHtml:"&nbsp;",hideDragSource:!1},a),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var n=e(this).children(e(this).data("items")).attr("draggable","enable"==i);"destroy"==i&&n.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{var s,d,o,h=e(this).children(a.items),l=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+a.placeholderClass+'">').html(a.placeholderHtml);h.find(a.handle).mousedown(function(){s=!0}).mouseup(function(){s=!1}),e(this).data("items",a.items),r=r.add(l),a.connectWith&&e(a.connectWith).add(this).data("connectWith",a.connectWith),h.attr("draggable","true").on("dragstart.h5s",function(r){if(a.hideDragsource&&t.hide(),a.handle&&!s)return!1;s=!1;var i=r.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),o=(t=e(this)).addClass("sortable-dragging").index(),d=t.parent()}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),r.detach(),o!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t.parent().is(d)||t.parent().trigger("sortconnect",{item:t}),t=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,l]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!h.is(t)&&a.connectWith!==e(t).parent().data("connectWith")||("drop"==i.type?(i.stopPropagation(),r.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",h.is(this)?((a.forcePlaceholderHeight||a.forcePlaceholderSize)&&l.height(t.outerHeight()),(a.forcePlaceholderWidth||a.forcePlaceholderSize)&&l.width(t.outerWidth()),a.hideDragSource?e(this)[l.index()<e(this).index()?"after":"before"](l):e(this)[e(this).index()<t.index()?"before":"after"](l),r.not(l).detach()):r.is(this)||e(this).children(a.items).length||(r.detach(),e(this).append(l)),!1))})}})}}(jQuery);